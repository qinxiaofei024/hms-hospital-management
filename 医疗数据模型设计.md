# 医疗质量安全监测系统 - 数据模型设计

## 🎯 设计原则

基于《医疗质量安全核心制度落实情况监测指标（2025年版）》和实际医疗业务场景，设计符合医疗行业标准的数据模型。

---

## 📊 1. 核心数据实体模型

### 1.1 患者基础信息模型
```javascript
const PatientModel = {
    patientId: 'string',           // 患者唯一标识
    hospitalNumber: 'string',      // 住院号
    name: 'string',               // 姓名
    gender: 'enum',               // 性别：M/F
    age: 'number',                // 年龄
    birthDate: 'date',            // 出生日期
    admissionDate: 'datetime',    // 入院时间
    dischargeDate: 'datetime',    // 出院时间
    department: 'string',         // 科室
    ward: 'string',               // 病区
    bedNumber: 'string',          // 床号
    diagnosisCode: 'array',       // ICD-10诊断编码
    diagnosisName: 'array',       // 诊断名称
    riskLevel: 'enum',            // 风险等级：低/中/高/极高
    insuranceType: 'enum',        // 医保类型
    contactInfo: 'object'         // 联系信息
};
```

### 1.2 医护人员信息模型
```javascript
const MedicalStaffModel = {
    staffId: 'string',            // 员工唯一标识
    name: 'string',               // 姓名
    jobTitle: 'enum',             // 职称：住院医师/主治医师/副主任医师/主任医师
    department: 'string',         // 科室
    specialization: 'array',      // 专业特长
    licenseNumber: 'string',      // 执业证书号
    workExperience: 'number',     // 工作年限
    qualifications: 'array',      // 资质认证
    currentShift: 'enum',         // 当前班次：白班/夜班/休息
    workload: 'object'            // 工作负荷统计
};
```

---

## 🏥 2. 诊疗流程数据模型

### 2.1 诊疗过程记录模型
```javascript
const DiagnosisProcessModel = {
    processId: 'string',          // 诊疗过程唯一标识
    patientId: 'string',          // 患者ID
    admissionInfo: {
        admissionTime: 'datetime',
        admissionDepartment: 'string',
        admissionDiagnosis: 'string',
        emergencyLevel: 'enum',    // 急诊等级：1-5级
        triageTime: 'datetime'     // 分诊时间
    },
    
    firstDiagnosisInfo: {
        firstDoctorId: 'string',   // 首诊医师ID
        firstDiagnosisTime: 'datetime',
        responsibilitySystem: 'boolean', // 首诊负责制执行
        diagnosisAccuracy: 'enum'  // 诊断准确性：准确/基本准确/不准确
    },
    
    roundsInfo: {
        rounds: [
            {
                roundType: 'enum',     // 查房类型：住院医师/主治医师/主任医师
                doctorId: 'string',
                roundTime: 'datetime',
                completed: 'boolean',
                notes: 'string'
            }
        ],
        completionRate: 'number'   // 三级查房完成率
    },
    
    consultationInfo: {
        consultations: [
            {
                consultationType: 'enum', // 会诊类型：科内/科间/院内/院外
                requestTime: 'datetime',
                responseTime: 'datetime',
                consultantId: 'string',
                completed: 'boolean',
                responseTimeMinutes: 'number'
            }
        ],
        averageResponseTime: 'number'
    }
};
```

### 2.2 医疗质量指标模型
```javascript
const QualityMetricsModel = {
    metricId: 'string',
    metricName: 'string',
    category: 'enum',             // 指标分类
    value: 'number',              // 指标值
    unit: 'string',               // 单位
    target: 'number',             // 目标值
    benchmark: 'number',          // 基准值
    trend: 'enum',                // 趋势：up/down/stable
    riskLevel: 'enum',            // 风险等级
    calculationMethod: 'string',  // 计算方法
    dataSource: 'string',         // 数据来源
    updateTime: 'datetime',       // 更新时间
    historicalData: [
        {
            date: 'date',
            value: 'number'
        }
    ]
};
```

---

## ⚕️ 3. 手术质量数据模型

### 3.1 手术基础信息模型
```javascript
const SurgeryModel = {
    surgeryId: 'string',          // 手术唯一标识
    patientId: 'string',          // 患者ID
    surgeryInfo: {
        surgeryName: 'string',    // 手术名称
        surgeryCode: 'string',    // 手术编码（ICD-9-CM-3）
        surgeryType: 'enum',      // 手术类型：择期/急诊
        surgeryLevel: 'enum',     // 手术分级：一级/二级/三级/四级
        anesthesiaType: 'enum',   // 麻醉方式
        operatingRoom: 'string',  // 手术室
        scheduledTime: 'datetime', // 计划手术时间
        actualStartTime: 'datetime', // 实际开始时间
        actualEndTime: 'datetime',   // 实际结束时间
        duration: 'number'        // 手术时长（分钟）
    },
    
    surgicalTeam: {
        primarySurgeon: 'string', // 主刀医师ID
        assistantSurgeons: 'array', // 助手医师ID列表
        anesthesiologist: 'string', // 麻醉医师ID
        nurses: 'array'           // 手术护士ID列表
    },
    
    safetyChecklist: {
        preOperativeCheck: {
            patientIdentity: 'boolean',
            surgicalSite: 'boolean',
            consentForm: 'boolean',
            allergies: 'boolean',
            equipmentCheck: 'boolean',
            completedBy: 'string',
            completedTime: 'datetime'
        },
        intraOperativeCheck: {
            timeOut: 'boolean',
            antibioticProphylaxis: 'boolean',
            criticalSteps: 'boolean',
            specimenLabeling: 'boolean',
            completedBy: 'string',
            completedTime: 'datetime'
        },
        postOperativeCheck: {
            procedureRecording: 'boolean',
            instrumentCount: 'boolean',
            specimenHandling: 'boolean',
            postOpInstructions: 'boolean',
            completedBy: 'string',
            completedTime: 'datetime'
        }
    }
};
```

### 3.2 手术并发症模型
```javascript
const SurgicalComplicationModel = {
    complicationId: 'string',
    surgeryId: 'string',
    patientId: 'string',
    complicationInfo: {
        type: 'enum',             // 并发症类型：术中/术后
        category: 'enum',         // 分类：感染/出血/器官损伤/其他
        severity: 'enum',         // 严重程度：轻度/中度/重度
        description: 'string',    // 详细描述
        onsetTime: 'datetime',    // 发生时间
        discoveryTime: 'datetime', // 发现时间
        treatmentMeasures: 'string', // 处理措施
        outcome: 'enum'           // 结局：治愈/好转/无变化/恶化/死亡
    },
    
    preventability: {
        preventable: 'boolean',   // 是否可预防
        rootCause: 'string',      // 根本原因
        improvementMeasures: 'string' // 改进措施
    }
};
```

---

## 👩‍⚕️ 4. 护理质量数据模型

### 4.1 护理记录模型
```javascript
const NursingRecordModel = {
    recordId: 'string',
    patientId: 'string',
    nurseId: 'string',
    shift: 'enum',                // 班次：白班/夜班
    recordTime: 'datetime',
    
    vitalSigns: {
        temperature: 'number',    // 体温
        pulse: 'number',          // 脉搏
        respiration: 'number',    // 呼吸
        bloodPressure: 'object',  // 血压 {systolic, diastolic}
        oxygenSaturation: 'number', // 血氧饱和度
        painScore: 'number'       // 疼痛评分
    },
    
    nursingAssessment: {
        consciousnessLevel: 'enum', // 意识状态
        mobilityLevel: 'enum',      // 活动能力
        fallRiskScore: 'number',    // 跌倒风险评分
        pressureUlcerRisk: 'number', // 压疮风险评分
        nutritionStatus: 'enum'     // 营养状况
    },
    
    nursingInterventions: [
        {
            intervention: 'string',  // 护理措施
            executionTime: 'datetime',
            result: 'string',       // 执行结果
            nurseId: 'string'       // 执行护士
        }
    ]
};
```

### 4.2 护理不良事件模型
```javascript
const NursingAdverseEventModel = {
    eventId: 'string',
    patientId: 'string',
    reporterId: 'string',         // 报告人ID
    eventInfo: {
        eventType: 'enum',        // 事件类型：跌倒/坠床/压疮/用药错误/其他
        severity: 'enum',         // 严重程度：无伤害/轻度/中度/重度/死亡
        occurTime: 'datetime',    // 发生时间
        discoveryTime: 'datetime', // 发现时间
        location: 'string',       // 发生地点
        description: 'string',    // 事件描述
        immediateActions: 'string', // 立即处理措施
        patientOutcome: 'string'  // 患者结局
    },
    
    rootCauseAnalysis: {
        humanFactors: 'array',    // 人为因素
        systemFactors: 'array',   // 系统因素
        environmentFactors: 'array', // 环境因素
        preventability: 'boolean', // 可预防性
        improvementPlan: 'string' // 改进计划
    }
};
```

---

## 🚨 5. 危重病例数据模型

### 5.1 危重患者监控模型
```javascript
const CriticalPatientModel = {
    monitoringId: 'string',
    patientId: 'string',
    criticalInfo: {
        riskLevel: 'enum',        // 危险等级：低危/中危/高危/极危
        earlyWarningScore: 'number', // 早期预警评分
        apacheScore: 'number',    // APACHE评分
        glasgowComaScale: 'number', // 格拉斯哥昏迷评分
        sepsis: 'boolean',        // 是否脓毒症
        shockStatus: 'boolean'    // 是否休克
    },
    
    monitoringData: {
        continuousMonitoring: 'boolean', // 是否持续监护
        monitoringStartTime: 'datetime',
        vitalSignsFrequency: 'number',   // 生命体征监测频率（分钟）
        alertThresholds: {
            heartRateMin: 'number',
            heartRateMax: 'number',
            bloodPressureMin: 'object',
            bloodPressureMax: 'object',
            temperatureMin: 'number',
            temperatureMax: 'number'
        }
    },
    
    interventions: [
        {
            interventionType: 'enum', // 干预类型：药物/手术/设备支持
            startTime: 'datetime',
            endTime: 'datetime',
            effectiveness: 'enum',   // 有效性：有效/部分有效/无效
            sideEffects: 'string'    // 副作用
        }
    ]
};
```

### 5.2 抢救记录模型
```javascript
const ResuscitationModel = {
    resuscitationId: 'string',
    patientId: 'string',
    emergencyInfo: {
        callTime: 'datetime',     // 呼叫时间
        arrivalTime: 'datetime',  // 到达时间
        responseTime: 'number',   // 响应时间（分钟）
        initialAssessment: 'string', // 初始评估
        resuscitationTeam: 'array'   // 抢救团队成员
    },
    
    resuscitationProcess: [
        {
            timestamp: 'datetime',
            action: 'string',     // 抢救措施
            medication: 'object', // 用药信息
            vitalSigns: 'object', // 生命体征
            response: 'string'    // 患者反应
        }
    ],
    
    outcome: {
        result: 'enum',           // 抢救结果：成功/失败
        endTime: 'datetime',      // 结束时间
        totalDuration: 'number',  // 总时长（分钟）
        finalDisposition: 'enum', // 最终去向：ICU/普通病房/死亡/转院
        complications: 'array'    // 并发症
    }
};
```

---

## 💊 6. 药事管理数据模型

### 6.1 处方信息模型
```javascript
const PrescriptionModel = {
    prescriptionId: 'string',
    patientId: 'string',
    prescriberId: 'string',       // 开方医师ID
    prescriptionInfo: {
        prescriptionDate: 'datetime',
        prescriptionType: 'enum', // 处方类型：普通/急诊/儿科/精神药品
        totalCost: 'number',      // 总费用
        insuranceCoverage: 'number', // 医保覆盖金额
        reviewStatus: 'enum',     // 审核状态：待审核/通过/驳回
        reviewerId: 'string',     // 审核药师ID
        reviewTime: 'datetime'
    },
    
    medications: [
        {
            medicationId: 'string',
            medicationName: 'string',
            genericName: 'string',    // 通用名
            dosageForm: 'string',     // 剂型
            strength: 'string',       // 规格
            quantity: 'number',       // 数量
            dosage: 'string',         // 用法用量
            duration: 'number',       // 用药天数
            indication: 'string',     // 适应症
            contraindications: 'array', // 禁忌症
            drugClass: 'enum',        // 药物分类
            antibioticType: 'string', // 抗菌药物类型（如适用）
            cost: 'number'            // 费用
        }
    ]
};
```

### 6.2 用药监控模型
```javascript
const MedicationMonitoringModel = {
    monitoringId: 'string',
    patientId: 'string',
    medicationId: 'string',
    
    administrationRecord: {
        scheduledTime: 'datetime', // 计划给药时间
        actualTime: 'datetime',    // 实际给药时间
        administeredBy: 'string',  // 给药护士ID
        dosageGiven: 'string',     // 实际给药剂量
        route: 'enum',             // 给药途径：口服/静脉/肌注/外用
        adherence: 'boolean'       // 是否按时给药
    },
    
    adverseReactions: [
        {
            reactionType: 'enum',  // 反应类型：过敏/毒性/副作用
            severity: 'enum',      // 严重程度：轻度/中度/重度
            onsetTime: 'datetime', // 发生时间
            description: 'string', // 反应描述
            treatment: 'string',   // 处理措施
            outcome: 'enum'        // 结局：恢复/好转/持续/恶化
        }
    ],
    
    drugInteractions: [
        {
            interactingDrug: 'string', // 相互作用药物
            interactionType: 'enum',   // 相互作用类型
            severity: 'enum',          // 严重程度
            clinicalSignificance: 'string', // 临床意义
            managementStrategy: 'string'    // 管理策略
        }
    ]
};
```

---

## 🔬 7. 技术创新数据模型

### 7.1 创新项目模型
```javascript
const InnovationProjectModel = {
    projectId: 'string',
    projectInfo: {
        projectName: 'string',
        projectType: 'enum',      // 项目类型：新技术/新设备/新流程/质量改进
        category: 'enum',         // 分类：诊断/治疗/护理/管理
        description: 'string',    // 项目描述
        objectives: 'array',      // 项目目标
        expectedBenefits: 'string', // 预期效益
        riskAssessment: 'string'  // 风险评估
    },
    
    projectTimeline: {
        proposalDate: 'date',     // 立项日期
        approvalDate: 'date',     // 批准日期
        startDate: 'date',        // 开始日期
        plannedEndDate: 'date',   // 计划结束日期
        actualEndDate: 'date',    // 实际结束日期
        currentPhase: 'enum',     // 当前阶段：立项/研发/试点/推广/评估
        milestones: [
            {
                milestoneName: 'string',
                plannedDate: 'date',
                actualDate: 'date',
                status: 'enum'    // 状态：未开始/进行中/已完成/延期
            }
        ]
    },
    
    projectTeam: {
        projectLeader: 'string',  // 项目负责人
        teamMembers: 'array',     // 团队成员
        advisors: 'array',        // 顾问专家
        budget: 'number',         // 项目预算
        actualCost: 'number'      // 实际成本
    }
};
```

### 7.2 质量改进模型
```javascript
const QualityImprovementModel = {
    improvementId: 'string',
    improvementInfo: {
        problemIdentification: 'string', // 问题识别
        currentState: 'string',          // 现状分析
        targetState: 'string',           // 目标状态
        improvementMethod: 'enum',       // 改进方法：PDCA/六西格玛/精益/其他
        interventions: 'array'           // 干预措施
    },
    
    measurementPlan: {
        outcomeMetrics: 'array',    // 结果指标
        processMetrics: 'array',    // 过程指标
        balancingMetrics: 'array',  // 平衡指标
        measurementFrequency: 'enum', // 测量频率
        dataCollectionMethod: 'string' // 数据收集方法
    },
    
    results: {
        baselineData: 'object',     // 基线数据
        interventionData: 'array',  // 干预期数据
        sustainabilityData: 'array', // 维持期数据
        statisticalSignificance: 'boolean', // 统计学意义
        clinicalSignificance: 'boolean',    // 临床意义
        costEffectiveness: 'number'         // 成本效益比
    }
};
```

---

## 🔌 8. API接口设计

### 8.1 RESTful API 规范
```javascript
const APIEndpoints = {
    // 患者相关接口
    patients: {
        getPatients: 'GET /api/patients',
        getPatient: 'GET /api/patients/{id}',
        createPatient: 'POST /api/patients',
        updatePatient: 'PUT /api/patients/{id}',
        deletePatient: 'DELETE /api/patients/{id}'
    },
    
    // 质量指标接口
    qualityMetrics: {
        getMetrics: 'GET /api/quality-metrics',
        getMetricsByCategory: 'GET /api/quality-metrics/category/{category}',
        getMetricHistory: 'GET /api/quality-metrics/{id}/history',
        updateMetric: 'PUT /api/quality-metrics/{id}'
    },
    
    // 实时监控接口
    realTimeMonitoring: {
        getCurrentStatus: 'GET /api/monitoring/current',
        getAlerts: 'GET /api/monitoring/alerts',
        acknowledgeAlert: 'POST /api/monitoring/alerts/{id}/acknowledge',
        subscribeToUpdates: 'WebSocket /ws/monitoring'
    },
    
    // 报告生成接口
    reports: {
        generateReport: 'POST /api/reports/generate',
        getReportStatus: 'GET /api/reports/{id}/status',
        downloadReport: 'GET /api/reports/{id}/download',
        getReportTemplates: 'GET /api/reports/templates'
    }
};
```

### 8.2 数据查询接口
```javascript
const QueryAPI = {
    // 通用查询接口
    query: {
        endpoint: 'POST /api/query',
        parameters: {
            entity: 'string',        // 查询实体
            filters: 'object',       // 过滤条件
            aggregations: 'array',   // 聚合函数
            groupBy: 'array',        // 分组字段
            orderBy: 'array',        // 排序字段
            limit: 'number',         // 限制条数
            offset: 'number'         // 偏移量
        }
    },
    
    // 时间序列查询
    timeSeries: {
        endpoint: 'GET /api/timeseries/{metric}',
        parameters: {
            startDate: 'datetime',
            endDate: 'datetime',
            granularity: 'enum',     // 粒度：hour/day/week/month
            aggregation: 'enum'      // 聚合方式：avg/sum/min/max/count
        }
    }
};
```

---

## 📈 9. 数据模拟策略

### 9.1 真实性数据生成规则
```javascript
const DataGenerationRules = {
    // 医疗指标的正常范围和分布
    medicalRanges: {
        vitalSigns: {
            temperature: { min: 36.0, max: 37.5, distribution: 'normal' },
            heartRate: { min: 60, max: 100, distribution: 'normal' },
            bloodPressure: {
                systolic: { min: 90, max: 140, distribution: 'normal' },
                diastolic: { min: 60, max: 90, distribution: 'normal' }
            }
        },
        
        qualityMetrics: {
            infectionRate: { min: 0.5, max: 3.0, distribution: 'exponential' },
            mortalityRate: { min: 0.1, max: 2.0, distribution: 'exponential' },
            satisfactionScore: { min: 80, max: 98, distribution: 'beta' }
        }
    },
    
    // 时间模式规律
    temporalPatterns: {
        dailyPattern: {
            peakHours: [9, 14, 20],    // 高峰时段
            lowHours: [2, 6],          // 低谷时段
            variationCoefficient: 0.2   // 变异系数
        },
        
        weeklyPattern: {
            peakDays: ['Monday', 'Tuesday'], // 高峰日
            lowDays: ['Saturday', 'Sunday'], // 低谷日
            variationCoefficient: 0.15
        },
        
        seasonalPattern: {
            peakMonths: [1, 2, 12],    // 高峰月份（冬季）
            lowMonths: [6, 7, 8],      // 低谷月份（夏季）
            variationCoefficient: 0.1
        }
    }
};
```

### 9.2 数据关联性规则
```javascript
const DataCorrelationRules = {
    // 指标间的相关性
    metricCorrelations: {
        // 手术并发症率与手术时长正相关
        surgicalComplications: {
            correlatedWith: 'surgeryDuration',
            correlationType: 'positive',
            strength: 0.6
        },
        
        // 护理满意度与护理人员配比正相关
        nursingSatisfaction: {
            correlatedWith: 'nursePatientRatio',
            correlationType: 'positive',
            strength: 0.7
        }
    },
    
    // 异常事件的触发规则
    anomalyTriggers: {
        highInfectionRate: {
            condition: 'infectionRate > 2.5',
            effects: [
                'increase antibioticUsage by 20%',
                'increase isolationProcedures by 30%'
            ]
        },
        
        staffShortage: {
            condition: 'nursePatientRatio < 0.4',
            effects: [
                'increase adverseEvents by 15%',
                'decrease patientSatisfaction by 10%'
            ]
        }
    }
};
```

---

## 🔒 10. 数据安全与隐私

### 10.1 数据脱敏规则
```javascript
const DataMaskingRules = {
    // 患者信息脱敏
    patientDataMasking: {
        name: 'pseudonymization',      // 假名化
        idNumber: 'partial_masking',   // 部分遮蔽
        phoneNumber: 'partial_masking',
        address: 'generalization'      // 泛化处理
    },
    
    // 医护人员信息脱敏
    staffDataMasking: {
        name: 'role_based_access',     // 基于角色的访问控制
        personalInfo: 'encryption',    // 加密存储
        performanceData: 'aggregation' // 聚合处理
    }
};
```

### 10.2 访问控制模型
```javascript
const AccessControlModel = {
    roles: {
        systemAdmin: {
            permissions: ['read', 'write', 'delete', 'admin'],
            dataScope: 'all'
        },
        qualityManager: {
            permissions: ['read', 'write'],
            dataScope: 'quality_metrics'
        },
        departmentHead: {
            permissions: ['read'],
            dataScope: 'department_specific'
        },
        clinician: {
            permissions: ['read'],
            dataScope: 'patient_care_related'
        }
    },
    
    dataClassification: {
        public: 'aggregated_statistics',
        internal: 'departmental_metrics',
        confidential: 'patient_identifiable_data',
        restricted: 'staff_performance_data'
    }
};
```

---

**设计理念**：基于真实医疗业务场景，构建专业、准确、安全的数据模型，确保系统的实用性和可信度。