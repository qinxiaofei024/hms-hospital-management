/*! time: 2025/9/2 15:53:22; branch: master describe: a5a458eaa commit: a5a458eaa9bf68029f66b1a68081ce87c8783674 */
var t=Object.defineProperty,e=(e,r,n)=>((e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n)(e,"symbol"!=typeof r?r+"":r,n);import{r,bO as n,dV as a,aP as i,k as o,h as s,dW as l,w as c,z as d,dX as u,dY as h,bo as g,dZ as p,d_ as m,d$ as f,c$ as y,cZ as v,o as w,bm as S,aO as b,at as L,j as T,m as C,e0 as M,e1 as P,e2 as R,aC as W,a$ as N,e3 as I,F as k,c1 as E}from"./resource?resource=/com/fr/plugin/wysiwyg/web/static/js/utils-hash-BZGqdNop.js";import{ce as F,cf as O,u as H,J as A,cg as D,ch as x,a as j,ci as z,cj as B,ck as _,cl as G,cm as V,af as U,s as X,aO as Y,cn as Z}from"./resource?resource=/com/fr/plugin/wysiwyg/web/static/js/setAppConfig-hash-DSmqnnw2.js";function $(t,e,r,n){r<t&&n(t),r>e&&n(e)}const q=({mode:t,width:e,height:l,children:c,containerClassName:d,contentClassName:u,contentStyle:h,containerStyle:g,containerRef:p,contentRef:m,contentScale:f=1,onScaleChange:y})=>{const v=r.useRef(null),w=a(v,p),S=r.useRef(null),b=a(S,m),L=F({targetRef:v,refreshMode:"throttle",refreshOptions:{leading:!0},refreshRate:200}),[T,C]=r.useState(),[M,P]=r.useState(),R=i(y),W=r.useMemo((()=>{const t=v.current,r=S.current;if(!t||!r||!T)return;return{width:0===t.offsetWidth?r.style.width:e*T.horizontal*f,height:0===t.offsetHeight?r.style.height:l?l*T.vertical*f:L.height}}),[T,l,e,L.height,f]);var N,I;return N=v,I=[L.width,L.height],r.useEffect((()=>{const t=N.current;if(!t)return;const{scrollHeight:e,clientHeight:r,scrollWidth:n,clientWidth:a,scrollTop:i,scrollLeft:o}=t;$(0,e-r,i,(e=>{t.scrollTop=e})),$(0,n-a,o,(e=>{t.scrollLeft=e}))}),[N,...I]),r.useEffect((()=>{var r;if(!v.current||!L.width||!L.height)return;const{width:a,height:i}=v.current.getBoundingClientRect(),o=function({actualSize:t,canvasSize:e,mode:r}){const{width:a,height:i}=t;if(!a||!i)return;const{width:o,height:s}=e,l=o?a/o:1,c=s?i/s:1;switch(r){case n.NONE:return{adaptiveScale:{horizontal:1,vertical:1},canvasStyle:{overflow:"auto"}};case n.AUTO:{const t=Math.min(l,c);return{adaptiveScale:{horizontal:t,vertical:t},canvasStyle:{overflow:"hidden"}}}case n.WIDTH_FILL:return{adaptiveScale:{horizontal:l,vertical:l},canvasStyle:{overflowX:"hidden",overflowY:"auto"}};case n.HEIGHT_FILL:return{adaptiveScale:{horizontal:c,vertical:c},canvasStyle:{overflowX:"auto",overflowY:"hidden"}};case n.WIDTH_HEIGHT_FILL:return{adaptiveScale:{horizontal:l,vertical:c},canvasStyle:{overflow:"hidden"}};default:return}}({actualSize:{width:a,height:i},canvasSize:{width:e,height:l},mode:t});o&&(C(o.adaptiveScale),P(o.canvasStyle),null==(r=R.current)||r.call(R,o.adaptiveScale))}),[l,e,t,L.width,L.height,R]),o("div",{ref:w,className:s("adaptive-canvas",d),style:{...M,...g},children:o("div",{className:s("adaptive-wrapper",u),style:{...W,...h},ref:b,children:T&&c})})};function J(t,e,r=[]){t.forEach((t=>{const n=r.concat(t),a=e(t,n);!1!==a&&J(a,e,n)}))}const K=({frame:t,widget:e,children:n,style:a,className:i})=>{const{updateOutWidgets:l,isPriorityWidgetLoaded:c}=u(),[d,g]=r.useState(0),[p,m]=r.useState(!0),f=()=>{g(0),m(!0)};return r.useLayoutEffect((()=>{if(!c)return;let e;return t.delay?("out"!==t.type&&m(!1),e=window.setTimeout((()=>{m(!0),g(t.duration)}),t.delay)):g(t.duration),()=>{f(),window.clearTimeout(e)}}),[t,c]),o(h,{widget:e,className:s(i,{["animate__".concat(t.name)]:d}),style:{opacity:p?1:0,...d&&{animationDuration:"".concat(d,"ms"),animationFillMode:"forwards"},...a},onAnimationEnd:()=>{f(),"out"===t.type&&l(e)},children:n})},Q=({frame:t,children:e,...r})=>{const{isPreviousAnimationFinished:n,isPriorityWidgetLoaded:a}=u();return("out"===t.type||a)&&("delay"!==t.type||n)?o(K,{frame:t,...r,children:e}):null},tt=({widget:t,frame:e,children:n,style:a,className:i,adaptiveScale:s})=>{const{updateOutWidgets:l,isPriorityWidgetLoaded:c,onTransitionStateChange:d}=u(),m=r.useRef(null),f=r.useMemo((()=>e.isPriorityTransition||c),[e,c]);r.useLayoutEffect((()=>{const r=m.current;if(!r||!f)return;const{type:n,duration:a,from:i,to:o}=e;"transitionIn"===n&&(null==d||d(t,"start"));const c={duration:a,..."out"===n&&{fill:"forwards"}},u=function(t){return"out"===n?t.toReversed():t},h=()=>{"transitionIn"===n&&(null==d||d(t,"finish"))},y="transitionIn"!==n?r.animate({opacity:u([0,0,1]),offset:[0,.3],easing:["ease","ease"]},c):void 0,[{states:v},{states:w}]=u([i,o]),[S,b]=new g(v.matrix).getPosition(),L=p({style:{width:v.width,height:v.height,left:S,top:b},adaptiveScale:s,withTransform:!1}),[T,C]=new g(w.matrix).getPosition(),M=p({style:{width:w.width,height:w.height,left:T,top:C},adaptiveScale:s,withTransform:!1}),P=r.animate({transform:u(["matrix(".concat(L.width/M.width,", 0, 0, ").concat(L.height/M.height,", ").concat(L.left-M.left,", ").concat(L.top-M.top,")"),"matrix(1, 0, 0, 1, 0, 0)"]),easing:"ease"},c);return P.onfinish=()=>{h(),l(e.from)},()=>{h(),null==y||y.cancel(),P.cancel()}}),[e,t,f]);const y="transitionIn"===e.type?e:void 0,v=y?f?e.to:e.from:t,w=r.useMemo((()=>{var e,r;if(v!==t){const[n,i]=new g(v.states.matrix).getPosition(),[o,l]=new g(t.states.matrix).getPosition(),{left:c,top:d,width:u,height:h}=p({style:{left:n-o,top:i-l,width:v.states.width,height:v.states.height},adaptiveScale:s,withTransform:!1});return{...a,left:Number(null!=(e=null==a?void 0:a.left)?e:0)+c,top:Number(null!=(r=null==a?void 0:a.top)?r:0)+d,width:u,height:h}}return a}),[v,a,t,s]);return o(h,{ref:m,widget:v,transitionFrame:f?y:void 0,className:i,style:w,children:n})},et=({frame:t,children:e,adaptiveScale:r,...n})=>{const{isPriorityWidgetLoaded:a}=u();return"in"!==t.type||a?"transitionParent"===t.type?o(h,{...n,children:e}):o(tt,{frame:t,adaptiveScale:r,...n,children:e}):null},rt=({widget:t,traverseIterator:e,loaded:r,style:n,className:a,adaptiveScale:i})=>{const{transitionFrames:s,animationFrames:l,isPriorityWidgetLoaded:c}=u(),d=null!=r?r:c,g=r=>{const n=null==e?void 0:e(t);return(null==n?void 0:n.length)?o(m,{items:n.map((t=>t.states)),origin:t.states.matrix,withContainer:!1,adaptiveScale:i,children:n.map((t=>o(rt,{widget:t,traverseIterator:e,loaded:r,adaptiveScale:i},t.id)))}):null},p=s.get(t);if(p)return o(et,{widget:t,frame:p,style:n,className:a,adaptiveScale:i,children:g("transitionParent"!==p.type||d)});const f=l.get(t);return f?o(Q,{widget:t,frame:f,style:n,className:a,children:g(!0)}):d?o(h,{widget:t,style:n,className:a,children:g(d)}):null},nt=({widgets:t,traverseIterator:e,transitionWidgetCollector:n,nodeRender:a,transitionDuration:i,isPriorityWidget:s,onTransitionFinish:u,onTransitionStateChange:h,withContainer:g,adaptiveScale:p})=>{const y=r.useRef([]),{transitionFrames:v,animationFrames:w,transitionWidgets:S,outAnimationWidgets:b,outTransitionWidgets:L,hasPriorityTransition:T}=r.useMemo((()=>(({prevWidgets:t=[],widgets:e,transitionDuration:r,traverseIterator:n=()=>[],transitionWidgetCollector:a=t=>[t],isPriorityWidget:i=()=>!1})=>{const o=new Map,s=new Map,u=new Map,h=[],g=[],p=[],m=new WeakSet;let f=!1;J(t,(t=>(u.set(t.name,t),n(t)))),r&&J(e,((t,e)=>{const s=u.get(t.name);if(!s)return n(t);const l=a(s).reduce(((t,e)=>(m.has(e)||t.set(e.name,e),t)),new Map),c=a(t);if(c.length>0&&c.length===l.size&&c.every((t=>{const e=l.get(t.name);return e&&t.type===e.type})))m.add(s).add(t),e.forEach((t=>{o.set(t,{from:t,to:t,duration:r,type:"transitionParent"})})),c.forEach((t=>{const e=u.get(t.name);if(e){const n=i(t),a={from:e,to:t,duration:r};o.set(t,{...a,type:"transitionIn",isPriorityTransition:n}),m.add(e),g.push(e),f=f||n}}));else{const e={from:s,to:t,duration:r};o.set(s,{...e,type:"out"}),o.set(t,{...e,type:"in"}),g.push(s)}return!1}));const y=(t,e)=>{J(t,(t=>{const r=o.get(t);if(r&&"transitionParent"!==r.type||m.has(t))return"out"===(null==r?void 0:r.type)&&p.push(t),!1;const a=e?t.states.animation.in:t.states.animation.out;return(null==a?void 0:a.name)?(s.set(t,{name:a.name,type:e?a.motion===O.START?"in":"delay":"out",duration:l(c(a.duration)),delay:l(d(a.delay))}),e||(h.push(t),p.push(t)),!1):n(t)}))};return y(t,!1),y(e,!0),{transitionFrames:o,animationFrames:s,transitionWidgets:e.slice(0,1).concat(p).concat(e.slice(1)),outAnimationWidgets:h,outTransitionWidgets:g,hasPriorityTransition:f}})({prevWidgets:y.current,widgets:t,transitionDuration:i,traverseIterator:e,transitionWidgetCollector:n,isPriorityWidget:s})),[t,i]),C=r.useRef(!1),M=r.useRef(new Set),P=H();y.current!==t&&(C.current=!1,M.current.clear());const R=r.useMemo((()=>b.every((t=>M.current.has(t)))),[b,M.current.size]);r.useEffect((()=>{let e;return T&&(e=window.setTimeout((()=>{C.current=!0,P()}),3500)),y.current=t,()=>{window.clearTimeout(e)}}),[T,t,P]),r.useEffect((()=>{let t;return 0===b.length&&0===L.length&&(t=window.requestAnimationFrame((()=>{null==u||u()}))),()=>{window.cancelAnimationFrame(t)}}),[u,b,L]),A((()=>{M.current.clear()}));const W=S.filter((t=>!M.current.has(t))),N=f.Provider;return o(N,{value:{transitionFrames:v,animationFrames:w,isPreviousAnimationFinished:R,isPriorityWidgetLoaded:!T||C.current,nodeRender:a,onTransitionStateChange:h,updateOutWidgets:t=>{M.current.has(t)||(M.current.add(t),P(),L.concat(b).every((t=>M.current.has(t)))&&(null==u||u()))}},children:o(m,{className:"transition-group",items:W.map((t=>t.states)),withContainer:g,adaptiveScale:p,children:W.map((t=>o(rt,{widget:t,traverseIterator:e,adaptiveScale:p},t.id)))})})};class at{constructor(t){e(this,"store"),this.store=t}get height(){return this.store.height}get width(){return this.store.width}get adaptiveMode(){return this.store.adaptiveMode}get adjustLayout(){return this.store.story.widgets}}var it=Object.defineProperty,ot=Object.getOwnPropertyDescriptor,st=(t,e,r,n)=>{for(var a,i=ot(e,r),o=t.length-1;o>=0;o--)(a=t[o])&&(i=a(e,r,i)||i);return i&&it(e,r,i),i};class lt extends at{constructor(t){super(t),y(this)}get width(){return D.WIDTH}get height(){return D.HEIGHT}get adaptiveMode(){return n.WIDTH_FILL}get widgetWidth(){return this.width-this.padding.left-this.padding.right}get gap(){const{mainStory:t}=this.store;return t.platform.mobile.widgetGap}get padding(){const{mainStory:t}=this.store;return t.platform.mobile.padding}get adjustLayout(){const{widgets:t}=this.store.story,e=t.filter((t=>!t.parent&&this.store.widgetsIsOnCanvas([t])&&t.visibleInStory)).reverse();return x(e)}get containerBackground(){const{mainStory:t}=this.store,{platform:e}=t;return e.backgroundLayer.render({className:"fluid-adaptive-container-background"})}get fluidLayoutStyle(){const{left:t,right:e,top:r,bottom:n}=this.padding;return{marginLeft:t,marginRight:e,marginTop:r,marginBottom:n}}}st([v],lt.prototype,"gap"),st([v],lt.prototype,"padding");const ct=w((({containerRef:t,containerClassName:e,contentClassName:n,children:a,...i})=>{const l=j();return r.useEffect((()=>{const e=null==t?void 0:t.current;if(!e)return;const r=t=>{l.setMouseEvent(t)};return e.addEventListener("pointerdown",r,!0),()=>{e.removeEventListener("pointerdown",r,!0)}}),[t,l.isLoading,l]),!l.isLoading&&o(q,{containerClassName:s("adaptive-container",e),contentClassName:s(S.ADAPTIVE_CONTENT,n),containerRef:t,...i,children:a})}));function dt(t,e){const{story:n}=j(),a=r.useRef(null),i=r.useRef(t);return i.current=t,r.useEffect((()=>{const t=a.current;if(!t||n.stickyWidgets.length<=0)return;const e=e=>{if(e&&e.target!==t||t.scrollHeight<=t.clientHeight)return;const{scrollTop:r}=t,a=b(n.stickyWidgets.filter((t=>i.current(t,r))));n.setStickyInfo({widget:a})};return e(),t.addEventListener("touchstart",e),t.addEventListener("scroll",e),()=>{t.removeEventListener("touchstart",e),t.removeEventListener("scroll",e)}}),[n,...e]),a}const ut=w((({model:t})=>{const{width:e,adaptiveMode:n,containerBackground:a}=t,[i,s]=r.useState(),l=j(),{toolHeightManager:c}=l.platform.mobile,d=dt((t=>{var e,r;return((null==(r=null==(e=t.target)?void 0:e.getBoundingClientRect())?void 0:r.top)||0)<=c.topControllerPanelHeight}),[i]),u=r.useRef(null);return L((()=>{l.platform.isMobile&&l.platform.mobile.duchampNavigation.setEl(d.current,u.current)})),T(C,{children:[a,o(ct,{mode:n,width:e,containerRef:d,contentClassName:S.SCROLL_CANVAS,contentRef:u,onScaleChange:t=>{s(t);const e=M(t);l.platform.isMobile&&l.platform.mobile.setPreviewScale(e)},contentStyle:{height:"fit-content"},children:o(z,{model:t,contentRef:u,adaptiveScale:i})})]})}));var ht=Object.defineProperty,gt=Object.getOwnPropertyDescriptor,pt=(t,e,r,n)=>{for(var a,i=gt(e,r),o=t.length-1;o>=0;o--)(a=t[o])&&(i=a(e,r,i)||i);return i&&ht(e,r,i),i};class mt extends at{constructor(t){super(t),e(this,"disposers",[]),y(this),this.updateLayout(t.story),this.disposers.push(P((()=>({story:t.story,visibleWidgets:t.story.platform.mobile.mobileWidgets.filter((t=>t.visibleInStory))})),(({story:t})=>{this.updateLayout(t)})))}updateLayout(t){t.store.platform.mobile.changeOriginalSize(),t.platform.mobile.transferMagneticLayout(!0)}get width(){return this.store.platform.width}get height(){return this.store.platform.height}get adaptiveMode(){return n.WIDTH_FILL}get gap(){const{mainStory:t}=this.store;return t.platform.mobile.widgetGap}get padding(){const{mainStory:t}=this.store;return t.platform.mobile.padding}get adjustLayout(){const{mobile:t}=this.store.story.platform;return t.sortedRootWidgets}get containerBackground(){const{mainStory:t}=this.store,{platform:e}=t;return e.backgroundLayer.render({className:"magnetic-adaptive-container-background"})}dispose(){this.disposers.forEach((t=>t()))}}pt([v],mt.prototype,"width"),pt([v],mt.prototype,"gap"),pt([v],mt.prototype,"padding"),pt([v],mt.prototype,"adjustLayout");const ft=w((({model:t,contentRef:e,adaptiveScale:r={horizontal:1,vertical:1}})=>{const{padding:n,adaptiveMode:a,adjustLayout:i,gap:s}=t,l=j();return B({ref:e,type:R.HEIGHT_AUTO_FIT,extraHeight:(n.top+n.bottom)*M(r),adaptiveMode:a,sessionID:l.duchampServer.sessionID,toolHeightManager:l.platform.mobile.toolHeightManager}),o(_,{widgets:i,options:{gap:s,padding:n},sticky:!0,adaptiveScale:r})})),yt=w((({model:t})=>{const{width:e,adaptiveMode:n,containerBackground:a}=t,[i,s]=r.useState(),l=j(),{toolHeightManager:c}=l.platform.mobile,d=dt((t=>{var e,r;return((null==(r=null==(e=t.target)?void 0:e.getBoundingClientRect())?void 0:r.top)||0)<=c.topControllerPanelHeight}),[i]),u=r.useRef(null);return L((()=>{l.platform.isMobile&&l.platform.mobile.duchampNavigation.setEl(d.current,u.current)})),A((()=>{t.dispose()})),T(C,{children:[a,o(ct,{mode:n,width:e,containerRef:d,contentClassName:S.SCROLL_CANVAS,contentRef:u,onScaleChange:t=>{s(t);const e=M(t);l.platform.isMobile&&l.platform.mobile.setPreviewScale(e)},contentStyle:{height:"fit-content"},children:o(ft,{adaptiveScale:i,model:t,contentRef:u})})]})}));var vt=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,St=(t,e,r,n)=>{for(var a,i=wt(e,r),o=t.length-1;o>=0;o--)(a=t[o])&&(i=a(e,r,i)||i);return i&&vt(e,r,i),i};class bt extends at{constructor(t){super(t),y(this)}get wrapperBackground(){const{mainStory:t}=this.store,{transition:e,platform:r}=t;return{backgroundLayer:r.backgroundLayer,style:{transition:this.hasTransition?"all ".concat(l(c(e.duration)),"ms ease"):void 0}}}get hasTransition(){var t;const{previewStories:e,mainStory:r,prevStory:n}=this.store,{transition:a,platform:i}=r,o=null==(t=e[n])?void 0:t.platform.backgroundLayer.type;return G({open:a.open,currentType:i.backgroundLayer.type,prevStoryIndex:n,prevBackgroundType:o})}get containerBackground(){const{mainStory:t}=this.store,{transition:e,platform:r}=t,n=l(c(e.duration));return function(t){const{backdropFilter:e,transitionProperty:r,transitionDuration:n,...a}=t;return o("div",{className:"reserve-adaptive-container-background",style:{transitionProperty:r,transitionDuration:n,...a},children:e&&o("div",{className:"reserve-container-background-filter",style:{backdropFilter:e,WebkitBackdropFilter:e,transitionDuration:n,transitionTimingFunction:"ease",transitionProperty:r?"backdrop-filter":void 0}})})}({...V(r.backgroundLayer.resource)?r.backgroundLayer.resource.blurryLayer(r.backgroundLayer.value):{},...this.hasTransition?{transitionProperty:"all",transitionDuration:"".concat(n,"ms")}:{}})}}St([v],bt.prototype,"wrapperBackground"),St([v],bt.prototype,"hasTransition"),St([v],bt.prototype,"containerBackground");const Lt=r.forwardRef((({widget:t,adaptiveScale:e,transitionFrame:r,children:n,className:a,style:i,...s},l)=>o(U,{widget:t,adaptiveScale:e,className:a,style:i,transitionFrame:r,ref:l,isSingleRoot:!0,withPosition:!1,...s,children:n})));Lt.displayName="WidgetNodeComponent";const Tt=w(Lt),Ct=w((({model:t})=>{const{width:e,height:n,adaptiveMode:a,containerBackground:i,wrapperBackground:d}=t,u=j(),{mainStory:h,isControllerPanelEnabled:m,isControllerPanelAutoSearch:f}=u,y=r.useRef(null),[v,w]=r.useState(),[b,P]=r.useState(1),[E,O]=r.useState(),H=r.useMemo((()=>{if(v)return{horizontal:v.horizontal*b,vertical:v.vertical*b}}),[v,b]),D=dt(((t,e)=>{const[,r]=new g(t.states.matrix).getPosition(),{top:n}=p({style:{top:r},adaptiveScale:H,withTransform:!1});return n<=e}),[H]),x=F({targetRef:y,refreshMode:"throttle",refreshOptions:{leading:!0},refreshRate:200}),{stickyInfo:z}=u.story,_=r.useMemo((()=>{const t=D.current,e=y.current,{widget:r}=z;if(!r||!t||!e)return{};const{y:n}=t.getBoundingClientRect(),{x:a}=e.getBoundingClientRect(),[i]=new g(r.states.matrix).getPosition(),{left:o}=p({style:{left:i},adaptiveScale:v,withTransform:!1});return{[r.id]:{position:"fixed",top:n,left:a+o,zIndex:1}}}),[v,D,z,x]);return L((()=>{u.platform.isMobile&&u.platform.mobile.duchampNavigation.setEl(D.current,y.current)})),A((()=>{u.renderManager.clear().then((()=>{u.singletonManager.clear()}))})),B({ref:y,type:R.HEIGHT_AUTO_FIT,adaptiveMode:u.adaptiveMode,sessionID:u.duchampServer.sessionID,toolHeightManager:u.platform.mobile.toolHeightManager}),r.useEffect((()=>{if(!H)return;const t=M(H);u.setScale(t,!1),u.platform.isMobile&&u.platform.mobile.setPreviewScale(t)}),[H,u]),T(C,{children:[i,o(ct,{mode:a,width:e,height:n,containerRef:D,containerClassName:s("reserve-adaptive-container",S.SCROLL_CANVAS,{selection:!W(E)}),contentClassName:"reserve-layout",contentStyle:E?{margin:"0",left:"".concat(-E.x,"px"),top:"".concat(-E.y,"px")}:{margin:"auto"},contentRef:y,contentScale:b,onScaleChange:t=>{w(t)},children:m&&!f||!H?null:T(C,{children:[d.backgroundLayer.render({className:"adaptive-wrapper-background",style:d.style,adaptiveScale:H}),o(nt,{withContainer:!1,adaptiveScale:H,widgets:h.rootWidgets,transitionDuration:h.transition.open?l(c(h.transition.duration)):void 0,traverseIterator:t=>N(t)?t.childWidgets:[],transitionWidgetCollector:t=>N(t)?t.flattenGroupChildWidgets:[t],nodeRender:({widget:t,ref:e,children:r,style:n,...a})=>o(Tt,{widget:t,adaptiveScale:H,style:{...n,..._[t.id]},ref:e,...a,children:N(t)&&r}),isPriorityWidget:I,onTransitionFinish:()=>{u.renderManager.retain(h.relatedWidgets.map((t=>t.id)))},onTransitionStateChange:(t,e)=>{t.setTransitionStatus(e)}})]})}),!u.platform.isMobile&&X.supportAppFunc(Y.SELECTION_ZOOM)&&o(Z,{className:k,container:y,onSelectionChange:t=>{t?(O(t.offset),P(t.scale)):(O(void 0),P(1))}})]})}));const Mt=new class{constructor(){e(this,"registry",new Map)}register(t,e,r){this.registry.set(t,{model:e,view:r})}unRegister(t){this.has(t)&&this.registry.delete(t)}getModel(t){var e;return null==(e=this.registry.get(t))?void 0:e.model}getView(t){var e;return null==(e=this.registry.get(t))?void 0:e.view}has(t){return this.registry.has(t)}};Mt.register(E.RESERVE,bt,Ct),Mt.register(E.FLUID,lt,ut),Mt.register(E.MAGNETIC,mt,yt);const Pt=w((({layoutType:t})=>{const e=j(),n=r.useMemo((()=>{var r;return new(null!=(r=Mt.getModel(t))?r:bt)(e)}),[t,e]),a=r.useMemo((()=>{var e;return null!=(e=Mt.getView(t))?e:Ct}),[t]);return o(a,{model:n})}));export{Pt as C};
